<!-- BEGIN_TF_DOCS -->

Azure Kubernetes Service

## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | n/a |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_kubernetes_cluster.lz](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster) | resource |
| [azurerm_kubernetes_cluster_node_pool.lz](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster_node_pool) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_aks"></a> [aks](#input\_aks) | Azure Kubernetes Service | <pre>object({<br>    node_pool = optional(map(object({<br>      # https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster_node_pool<br>      name                          = string<br>      kubernetes_cluster_id         = string<br>      vm_size                       = string<br>      mode                          = optional(string)<br>      capacity_reservation_group_id = optional(string)<br>      custom_ca_trust_enabled       = optional(bool)<br>      enable_auto_scaling           = optional(bool)<br>      max_count                     = optional(number)<br>      min_count                     = optional(number)<br>      node_count                    = optional(number)<br>      enable_host_encryption        = optional(bool)<br>      enable_node_public_ip         = optional(bool)<br>      gpu_instance                  = optional(string)<br>      host_group_id                 = optional(string)<br>      fips_enabled                  = optional(bool)<br>      kubelet_disk_type             = optional(string)<br>      max_pods                      = optional(number)<br>      message_of_the_day            = optional(string)<br>      node_public_ip_prefix_id      = optional(string)<br>      node_labels                   = optional(map(string))<br>      orchestrator_version          = optional(string)<br>      os_disk_size_gb               = optional(number)<br>      os_disk_type                  = optional(string)<br>      os_sku                        = optional(string)<br>      pod_subnet_id                 = optional(string)<br>      proximity_placement_group_id  = optional(string)<br>      scale_down_mode               = optional(string)<br>      snapshot_id                   = optional(string)<br>      tags                          = optional(map(string))<br>      ultra_ssd_enabled             = optional(bool)<br>      vnet_subnet_id                = optional(string)<br>      workload_runtime              = optional(string)<br>      zones                         = optional(list(string))<br>      kubelet_config = optional(object({<br>        allowed_unsafe_sysctls    = optional(list(string))<br>        container_log_max_line    = optional(number)<br>        container_log_max_size_mb = optional(number)<br>        cpu_cfs_quota_enabled     = optional(bool)<br>        cpu_cfs_quota_period      = optional(number)<br>        cpu_manager_policy        = optional(string)<br>        image_gc_high_threshold   = optional(number)<br>        image_gc_low_threshold    = optional(number)<br>        pod_max_pid               = optional(number)<br>        topology_manager_policy   = optional(string)<br>      }))<br>      linux_os_config = optional(object({<br>        swap_file_size_mb             = optional(number)<br>        transparent_huge_page_defrag  = optional(string)<br>        transparent_huge_page_enabled = optional(bool)<br>        sysctl_config = optional(object({<br>          fs_aio_max_nr                      = optional(number)<br>          fs_file_max                        = optional(number)<br>          fs_inotify_max_user_watches        = optional(number)<br>          fs_nr_open                         = optional(number)<br>          kernel_threads_max                 = optional(number)<br>          net_core_netdev_max_backlog        = optional(number)<br>          net_core_optmem_max                = optional(number)<br>          net_core_rmem_default              = optional(number)<br>          net_core_rmem_max                  = optional(number)<br>          net_core_somaxconn                 = optional(number)<br>          net_core_wmem_default              = optional(number)<br>          net_core_wmem_max                  = optional(number)<br>          net_ipv4_ip_local_port_range_max   = optional(number)<br>          net_ipv4_ip_local_port_range_min   = optional(number)<br>          net_ipv4_neigh_default_gc_thresh1  = optional(number)<br>          net_ipv4_neigh_default_gc_thresh2  = optional(number)<br>          net_ipv4_neigh_default_gc_thresh3  = optional(number)<br>          net_ipv4_tcp_fin_timeout           = optional(number)<br>          net_ipv4_tcp_keepalive_intvl       = optional(number)<br>          net_ipv4_tcp_keepalive_probes      = optional(number)<br>          net_ipv4_tcp_keepalive_time        = optional(number)<br>          net_ipv4_tcp_max_syn_backlog       = optional(number)<br>          net_ipv4_tcp_max_tw_buckets        = optional(number)<br>          net_ipv4_tcp_tw_reuse              = optional(number)<br>          net_netfilter_nf_conntrack_buckets = optional(number)<br>          net_netfilter_nf_conntrack_max     = optional(number)<br>          vm_max_map_count                   = optional(number)<br>          vm_swappiness                      = optional(number)<br>          vm_vfs_cache_pressure              = optional(number)<br>        }))<br>      }))<br>      node_network_profile = optional(object({<br>        application_security_group_ids = optional(list(string))<br>        node_public_ip_tags            = optional(map(string))<br>        allowed_host_ports = optional(list(object({<br>          port_start = optional(number)<br>          port_end   = optional(number)<br>          protocol   = optional(string)<br>        })))<br>      }))<br>      upgrade_settings = optional(object({<br>        drain_timeout_in_minutes      = optional(number)<br>        node_soak_duration_in_minutes = optional(number)<br>        max_surge                     = optional(string)<br>      }))<br>    })))<br>    cluster = optional(map(object({<br>      # https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster<br>      name                                = string<br>      resource_group_name                 = string<br>      location                            = string<br>      tags                                = optional(map(string))<br>      dns_prefix                          = optional(string)<br>      dns_prefix_private_cluster          = optional(string)<br>      automatic_channel_upgrade           = optional(string)<br>      azure_policy_enabled                = optional(bool)<br>      cost_analysis_enabled               = optional(bool)<br>      custom_ca_trust_certificates_base64 = optional(list(string))<br>      disk_encryption_set_id              = optional(string)<br>      http_application_routing_enabled    = optional(bool)<br>      image_cleaner_enabled               = optional(bool)<br>      image_cleaner_interval_hours        = optional(number)<br>      kubernetes_version                  = optional(string)<br>      local_account_disabled              = optional(bool)<br>      node_os_channel_upgrade             = optional(string)<br>      node_resource_group                 = optional(string)<br>      oidc_issuer_enabled                 = optional(bool)<br>      open_service_mesh_enabled           = optional(bool)<br>      private_cluster_enabled             = optional(bool)<br>      private_dns_zone_id                 = optional(string)<br>      private_cluster_public_fqdn_enabled = optional(bool)<br>      workload_identity_enabled           = optional(bool)<br>      role_based_access_control_enabled   = optional(bool)<br>      run_command_enabled                 = optional(bool)<br>      sku_tier                            = optional(string)<br>      support_plan                        = optional(string)<br>      default_node_pool = object({<br>        name                          = string<br>        vm_size                       = string<br>        capacity_reservation_group_id = optional(string)<br>        custom_ca_trust_enabled       = optional(bool)<br>        enable_auto_scaling           = optional(bool)<br>        max_count                     = optional(number)<br>        min_count                     = optional(number)<br>        node_count                    = optional(number)<br>        enable_host_encryption        = optional(bool)<br>        enable_node_public_ip         = optional(bool)<br>        gpu_instance                  = optional(string)<br>        host_group_id                 = optional(string)<br>        fips_enabled                  = optional(bool)<br>        kubelet_disk_type             = optional(string)<br>        max_pods                      = optional(number)<br>        message_of_the_day            = optional(string)<br>        node_public_ip_prefix_id      = optional(string)<br>        node_labels                   = optional(map(string))<br>        only_critical_addons_enabled  = optional(bool)<br>        orchestrator_version          = optional(string)<br>        os_disk_size_gb               = optional(number)<br>        os_disk_type                  = optional(string)<br>        os_sku                        = optional(string)<br>        pod_subnet_id                 = optional(string)<br>        proximity_placement_group_id  = optional(string)<br>        scale_down_mode               = optional(string)<br>        snapshot_id                   = optional(string)<br>        temporary_name_for_rotation   = optional(string)<br>        type                          = optional(string)<br>        tags                          = optional(map(string))<br>        ultra_ssd_enabled             = optional(bool)<br>        vnet_subnet_id                = optional(string)<br>        workload_runtime              = optional(string)<br>        zones                         = optional(list(string))<br>        kubelet_config = optional(object({<br>          allowed_unsafe_sysctls    = optional(list(string))<br>          container_log_max_line    = optional(number)<br>          container_log_max_size_mb = optional(number)<br>          cpu_cfs_quota_enabled     = optional(bool)<br>          cpu_cfs_quota_period      = optional(number)<br>          cpu_manager_policy        = optional(string)<br>          image_gc_high_threshold   = optional(number)<br>          image_gc_low_threshold    = optional(number)<br>          pod_max_pid               = optional(number)<br>          topology_manager_policy   = optional(string)<br>        }))<br>        linux_os_config = optional(object({<br>          swap_file_size_mb             = optional(number)<br>          transparent_huge_page_defrag  = optional(string)<br>          transparent_huge_page_enabled = optional(bool)<br>          sysctl_config = optional(object({<br>            fs_aio_max_nr                      = optional(number)<br>            fs_file_max                        = optional(number)<br>            fs_inotify_max_user_watches        = optional(number)<br>            fs_nr_open                         = optional(number)<br>            kernel_threads_max                 = optional(number)<br>            net_core_netdev_max_backlog        = optional(number)<br>            net_core_optmem_max                = optional(number)<br>            net_core_rmem_default              = optional(number)<br>            net_core_rmem_max                  = optional(number)<br>            net_core_somaxconn                 = optional(number)<br>            net_core_wmem_default              = optional(number)<br>            net_core_wmem_max                  = optional(number)<br>            net_ipv4_ip_local_port_range_max   = optional(number)<br>            net_ipv4_ip_local_port_range_min   = optional(number)<br>            net_ipv4_neigh_default_gc_thresh1  = optional(number)<br>            net_ipv4_neigh_default_gc_thresh2  = optional(number)<br>            net_ipv4_neigh_default_gc_thresh3  = optional(number)<br>            net_ipv4_tcp_fin_timeout           = optional(number)<br>            net_ipv4_tcp_keepalive_intvl       = optional(number)<br>            net_ipv4_tcp_keepalive_probes      = optional(number)<br>            net_ipv4_tcp_keepalive_time        = optional(number)<br>            net_ipv4_tcp_max_syn_backlog       = optional(number)<br>            net_ipv4_tcp_max_tw_buckets        = optional(number)<br>            net_ipv4_tcp_tw_reuse              = optional(number)<br>            net_netfilter_nf_conntrack_buckets = optional(number)<br>            net_netfilter_nf_conntrack_max     = optional(number)<br>            vm_max_map_count                   = optional(number)<br>            vm_swappiness                      = optional(number)<br>            vm_vfs_cache_pressure              = optional(number)<br>          }))<br>        }))<br>        node_network_profile = optional(object({<br>          application_security_group_ids = optional(list(string))<br>          node_public_ip_tags            = optional(map(string))<br>          allowed_host_ports = optional(list(object({<br>            port_start = optional(number)<br>            port_end   = optional(number)<br>            protocol   = optional(string)<br>          })))<br>        }))<br>        upgrade_settings = optional(object({<br>          drain_timeout_in_minutes      = optional(number)<br>          node_soak_duration_in_minutes = optional(number)<br>          max_surge                     = optional(string)<br>        }))<br>      })<br>      aci_connector_linux = optional(object({<br>        subnet_name = optional(string)<br>      }))<br>      api_server_access_profile = optional(object({<br>        authorized_ip_ranges     = optional(list(string))<br>        subnet_id                = optional(string)<br>        vnet_integration_enabled = optional(bool)<br>      }))<br>      auto_scaler_profile = optional(object({<br>        balance_similar_node_groups      = optional(bool)<br>        expander                         = optional(string)<br>        max_graceful_termination_sec     = optional(number)<br>        max_node_provisioning_time       = optional(number)<br>        max_unready_nodes                = optional(number)<br>        max_unready_percentage           = optional(number)<br>        new_pod_scale_up_delay           = optional(number)<br>        scale_down_delay_after_add       = optional(string)<br>        scale_down_delay_after_delete    = optional(string)<br>        scale_down_delay_after_failure   = optional(string)<br>        scan_interval                    = optional(string)<br>        scale_down_unneeded              = optional(string)<br>        scale_down_unready               = optional(string)<br>        scale_down_utilization_threshold = optional(number)<br>        empty_bulk_delete_max            = optional(number)<br>        skip_nodes_with_local_storage    = optional(bool)<br>        skip_nodes_with_system_pods      = optional(bool)<br>      }))<br>      azure_active_directory_role_based_access_control = optional(object({<br>        tenant_id              = optional(string)<br>        admin_group_object_ids = optional(list(string))<br>        azure_rbac_enabled     = optional(string)<br>      }))<br>      confidential_computing = optional(object({<br>        sgx_quote_helper_enabled = optional(bool)<br>      }))<br>      http_proxy_config = optional(object({<br>        http_proxy  = optional(string)<br>        https_proxy = optional(string)<br>        no_proxy    = optional(string)<br>        trusted_ca  = optional(string)<br>      }))<br>      identity = optional(object({<br>        type         = string<br>        identity_ids = optional(list(string))<br>      }))<br>      ingress_application_gateway = optional(object({<br>        gateway_id   = optional(string)<br>        gateway_name = optional(string)<br>        subnet_cidr  = optional(string)<br>        subnet_id    = optional(string)<br>      }))<br>      key_management_service = optional(object({<br>        key_vault_key_id         = optional(string)<br>        key_vault_network_access = optional(string)<br>      }))<br>      key_vault_secrets_provider = optional(object({<br>        secret_rotation_enabled  = optional(string)<br>        secret_rotation_interval = optional(string)<br>      }))<br>      kubelet_identity = optional(object({<br>        client_id                 = optional(string)<br>        object_id                 = optional(string)<br>        user_assigned_identity_id = optional(string)<br>      }))<br>      linux_profile = optional(object({<br>        admin_username = optional(string)<br>        ssh_key = optional(list(object({<br>          key_data = optional(string)<br>        })))<br>      }))<br>      maintenance_window = optional(object({<br>        allowed = optional(object({<br>          day   = string<br>          hours = list(number)<br>        }))<br>        not_allowed = optional(object({<br>          start = string<br>          end   = string<br>        }))<br>      }))<br>      maintenance_window_auto_upgrade = optional(object({<br>        frequency    = string<br>        interval     = number<br>        duration     = number<br>        day_of_week  = optional(string)<br>        day_of_month = optional(number)<br>        week_index   = optional(string)<br>        start_time   = optional(string)<br>        utc_offset   = optional(string)<br>        start_date   = optional(string)<br>        not_allowed = optional(object({<br>          start = string<br>          end   = string<br>        }))<br>      }))<br>      maintenance_window_node_os = optional(object({<br>        frequency    = string<br>        interval     = number<br>        duration     = number<br>        day_of_week  = optional(string)<br>        day_of_month = optional(number)<br>        week_index   = optional(string)<br>        start_time   = optional(string)<br>        utc_offset   = optional(string)<br>        start_date   = optional(string)<br>        not_allowed = optional(object({<br>          start = string<br>          end   = string<br>        }))<br>      }))<br>      microsoft_defender = optional(object({<br>        log_analytics_workspace_id = string<br>      }))<br>      monitor_metrics = optional(object({<br>        annotations_allowed = optional(list(string))<br>        labels_allowed      = optional(list(string))<br>      }))<br>      network_profile = optional(object({<br>        network_plugin      = string<br>        network_mode        = optional(string)<br>        network_policy      = optional(string)<br>        dns_service_ip      = optional(string)<br>        network_data_plane  = optional(string)<br>        network_plugin_mode = optional(string)<br>        outbound_type       = optional(string)<br>        pod_cidr            = optional(string)<br>        pod_cidrs           = optional(list(string))<br>        service_cidr        = optional(string)<br>        service_cidrs       = optional(list(string))<br>        ip_versions         = optional(list(string))<br>        load_balancer_sku   = optional(string)<br>        load_balancer_profile = optional(object({<br>          idle_timeout_in_minutes     = optional(number)<br>          managed_outbound_ip_count   = optional(number)<br>          managed_outbound_ipv6_count = optional(number)<br>          outbound_ip_address_ids     = optional(list(string))<br>          outbound_ip_prefix_ids      = optional(list(string))<br>          outbound_ports_allocated    = optional(number)<br>        }))<br>        nat_gateway_profile = optional(object({<br>          idle_timeout_in_minutes   = optional(number)<br>          managed_outbound_ip_count = optional(number)<br>        }))<br>      }))<br>      oms_agent = optional(object({<br>        log_analytics_workspace_id      = string<br>        msi_auth_for_monitoring_enabled = optional(bool)<br>      }))<br>      service_mesh_profile = optional(object({<br>        mode                             = string<br>        internal_ingress_gateway_enabled = optional(bool)<br>        external_ingress_gateway_enabled = optional(bool)<br>      }))<br>      workload_autoscaler_profile = optional(object({<br>        keda_enabled                    = optional(bool)<br>        vertical_pod_autoscaler_enabled = optional(bool)<br>      }))<br>      service_principal = optional(object({<br>        client_id     = string<br>        client_secret = string<br>      }))<br>      storage_profile = optional(object({<br>        blob_driver_enabled         = optional(bool)<br>        disk_driver_enabled         = optional(bool)<br>        disk_driver_version         = optional(string)<br>        file_driver_enabled         = optional(bool)<br>        snapshot_controller_enabled = optional(bool)<br>      }))<br>      web_app_routing = optional(object({<br>        dns_zone_ids = list(string)<br>      }))<br>      windows_profile = optional(object({<br>        admin_username = string<br>        admin_password = optional(string)<br>        license        = optional(string)<br>        gmsa = optional(object({<br>          dns_server  = string<br>          root_domain = string<br>        }))<br>      }))<br>    })))<br>  })</pre> | `{}` | no |
| <a name="input_common"></a> [common](#input\_common) | Common Azure resource parameters | <pre>object({<br>    tags            = optional(map(string))<br>    custom_metadata = optional(map(string))<br>  })</pre> | `{}` | no |
| <a name="input_entra_id"></a> [entra\_id](#input\_entra\_id) | Entra ID configuration | <pre>object({<br>    alias = optional(map(string), {})<br>  })</pre> | <pre>{<br>  "alias": {}<br>}</pre> | no |
| <a name="input_reference"></a> [reference](#input\_reference) | Azure Resource references | <pre>object({<br>    azure_subnet                  = optional(map(any))<br>    azure_log_analytics_workspace = optional(map(any))<br>    azure_storage_account         = optional(map(any))<br>    azure_private_dns_zone        = optional(map(any))<br>    azure_resource_group          = optional(map(any))<br>    azure_role_definition         = optional(map(any))<br>    azure_resource_principal_id   = optional(map(any))<br>  })</pre> | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_azure_kubernetes_cluster"></a> [azure\_kubernetes\_cluster](#output\_azure\_kubernetes\_cluster) | Azure AKS Clusters |
<!-- END_TF_DOCS -->